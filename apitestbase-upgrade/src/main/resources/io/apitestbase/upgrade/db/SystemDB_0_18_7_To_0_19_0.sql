ALTER TABLE UDP ADD "FOLDER_ID" bigint NULL;
ALTER TABLE UDP ADD FOREIGN KEY (FOLDER_ID) REFERENCES FOLDER(ID) ON DELETE CASCADE;
ALTER TABLE UDP ADD CONSTRAINT UDP_EXCLUSIVE_CONTAINER_TYPE_CONSTRAINT CHECK((TESTCASE_ID IS NULL AND FOLDER_ID IS NOT NULL) OR (TESTCASE_ID IS NOT NULL AND FOLDER_ID IS NULL));
ALTER TABLE UDP ADD CONSTRAINT UDP_UNIQUE_SEQUENCE_CONSTRAINT2 UNIQUE(FOLDER_ID, SEQUENCE);
ALTER TABLE UDP ADD CONSTRAINT UDP_UNIQUE_NAME_CONSTRAINT2 UNIQUE(FOLDER_ID, NAME);

ALTER TABLE DATATABLE_COLUMN ALTER COLUMN TESTCASE_ID bigint NULL;
ALTER TABLE DATATABLE_COLUMN ADD "TESTSTEP_ID" bigint NULL;
ALTER TABLE DATATABLE_COLUMN ADD FOREIGN KEY (TESTSTEP_ID) REFERENCES TESTSTEP(ID) ON DELETE CASCADE;
ALTER TABLE DATATABLE_COLUMN ADD CONSTRAINT DATATABLE_COLUMN_EXCLUSIVE_CONTAINER_TYPE_CONSTRAINT CHECK((TESTCASE_ID IS NULL AND TESTSTEP_ID IS NOT NULL) OR (TESTCASE_ID IS NOT NULL AND TESTSTEP_ID IS NULL));
ALTER TABLE DATATABLE_COLUMN ADD CONSTRAINT DATATABLE_COLUMN_UNIQUE_SEQUENCE_CONSTRAINT2 UNIQUE(TESTSTEP_ID, SEQUENCE);
ALTER TABLE DATATABLE_COLUMN ADD CONSTRAINT DATATABLE_COLUMN_UNIQUE_NAME_CONSTRAINT2 UNIQUE(TESTSTEP_ID, NAME);

insert into datatable_column (name, type, sequence, teststep_id) select 'Caption', 'String', 1, id, from teststep;